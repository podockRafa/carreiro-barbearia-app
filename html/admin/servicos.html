<!-- SERVICOS -->

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin • Serviços — Barbearia Carreiro</title>

    <link rel="stylesheet" href="../../css/admin.css?v=4" />

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script defer src="../../js/firebase-config.js"></script>

    <script defer src="../../js/layout-loader.js"></script>
    <script defer src="../../js/service.js"></script>
</head>
<body class="admin-body">
  <div class="admin-shell">
    <!-- SIDEBAR -->
    <div id="sidebar-placeholder"></div>

    <!-- MAIN -->
    <main class="admin-main">
      <header class="admin-topbar">
        <h1>serviços</h1>
      </header>

      <!-- ===== Tabela única ===== -->
      <section class="panel">
        <div class="svc-utils">
          <div class="search">
            <label for="svcQ" style="margin:0">Busca:</label>
            <input id="svcQ" type="text" placeholder="Nome, observação, tipo…" />
          </div>
          <div class="svc-util-btns">
            <button id="svcExport" class="btn btn-blue">Exportar JSON</button>
            <label class="btn btn-ghost">Importar JSON
              <input id="svcImportFile" type="file" accept="application/json" hidden />
            </label>
            <button id="svcZerar" class="btn btn-red">Zerar catálogo</button>
          </div>
        </div>

        <div class="table-wrap">
          <table id="svcTable" class="table">
            <thead>
              <tr>
                <th>ícone</th>
                <th>serviço</th>
                <th>duração(min)</th>
                <th>Preço (R$)</th>
                <th>Custo (R$)</th>
                <th>Lucro (R$)</th>
                <th>Margem (%)</th>
                <th class="hide-sm">observação</th>
                <th class="hide-sm">Materiais (lista resumida)</th>
                <th style="width:88px">Ações</th>
              </tr>
            </thead>
            <tbody id="svcTbody">
              <!-- linhas renderizadas via service.js -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- FAB: adicionar novo serviço -->
      <button id="btnFabAddService" class="fab" title="Novo serviço" aria-label="Novo serviço">+</button>

      <!-- ===== Modal: Adicionar / Editar ===== -->
      <div id="svcModal" class="modal" aria-hidden="true">
        <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="svcModalTitle">
          <button class="modal-close" data-close>&times;</button>
          <h3 id="svcModalTitle">Novo serviço</h3>

          <form id="svcForm">
            <input type="hidden" id="svcId" />

            <div class="svc-row">
              <div>
                <label for="mNome">Nome *</label>
                <input id="mNome" type="text" required />
              </div>
              <div>
                <label for="mDuracao">Duração (min) *</label>
                <input id="mDuracao" type="number" min="0" step="1" required />
              </div>
            </div>

            <div class="svc-row">
              <div>
                <label for="mPreco">Preço (R$) *</label>
                <input id="mPreco" type="number" step="0.01" min="0" required />
              </div>
              <div>
                <label for="mCusto">Custo (R$)</label>
                <input id="mCusto" type="number" step="0.01" min="0" />
              </div>
            </div>

            <div class="svc-row">
              <div>
                <label for="mObs">Observação</label>
                <input id="mObs" type="text" />
              </div>
            </div>

            <div class="svc-row">
              <div>
                <label for="mFoto">Foto (PNG/JPG)</label>
                <input id="mFoto" type="file" accept="image/*" />
              </div>
            </div>

            <div class="svc-actions">
              <button type="submit" class="btn btn-green">Salvar</button>
              <button type="button" class="btn btn-ghost" data-close>Cancelar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- ===== Modal: Confirmar exclusão ===== -->
      <div id="svcModalDelete" class="modal" aria-hidden="true">
        <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="svcModalDelTitle">
          <button class="modal-close" data-close>&times;</button>
          <h3 id="svcModalDelTitle">Excluir serviço</h3>
          <p>Tem certeza que deseja excluir <strong id="delNome">este serviço</strong>?</p>
          <div class="svc-actions">
            <button id="btnConfirmDelete" class="btn btn-red">Excluir</button>
            <button class="btn btn-ghost" data-close>Cancelar</button>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>
</html>